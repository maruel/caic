(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const Nt=!1,Mt=(t,e)=>t===e,Ot=Symbol("solid-track"),it={equals:Mt};let kt=Et;const Y=1,lt=2,St={owned:null,cleanups:null,context:null,owner:null};var C=null;let dt=null,Ft=null,A=null,P=null,Q=null,ft=0;function rt(t,e){const n=A,s=C,r=t.length===0,i=e===void 0?s:e,o=r?St:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=r?t:()=>t(()=>X(()=>tt(o)));C=o,A=null;try{return nt(l,!0)}finally{A=n,C=s}}function q(t,e){e=e?Object.assign({},it,e):it;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),Ct(n,r));return[At.bind(n),s]}function y(t,e,n){const s=_t(t,e,!1,Y);et(s)}function xt(t,e,n){kt=jt;const s=_t(t,e,!1,Y);s.user=!0,Q?Q.push(s):et(s)}function U(t,e,n){n=n?Object.assign({},it,n):it;const s=_t(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,et(s),At.bind(s)}function X(t){if(A===null)return t();const e=A;A=null;try{return t()}finally{A=e}}function Rt(t){xt(()=>X(t))}function Tt(t){return C===null||(C.cleanups===null?C.cleanups=[t]:C.cleanups.push(t)),t}function Gt(t){const e=U(t),n=U(()=>gt(e()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}function At(){if(this.sources&&this.state)if(this.state===Y)et(this);else{const t=P;P=null,nt(()=>at(this),!1),P=t}if(A){const t=this.observers?this.observers.length:0;A.sources?(A.sources.push(this),A.sourceSlots.push(t)):(A.sources=[this],A.sourceSlots=[t]),this.observers?(this.observers.push(A),this.observerSlots.push(A.sources.length-1)):(this.observers=[A],this.observerSlots=[A.sources.length-1])}return this.value}function Ct(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&nt(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],o=dt&&dt.running;o&&dt.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?P.push(i):Q.push(i),i.observers&&It(i)),o||(i.state=Y)}if(P.length>1e6)throw P=[],new Error},!1)),e}function et(t){if(!t.fn)return;tt(t);const e=ft;Dt(t,t.value,e)}function Dt(t,e,n){let s;const r=C,i=A;A=C=t;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=Y,t.owned&&t.owned.forEach(tt),t.owned=null),t.updatedAt=n+1,Lt(o)}finally{A=i,C=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Ct(t,s):t.value=s,t.updatedAt=n)}function _t(t,e,n,s=Y,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:C,context:C?C.context:null,pure:n};return C===null||C!==St&&(C.owned?C.owned.push(i):C.owned=[i]),i}function ot(t){if(t.state===0)return;if(t.state===lt)return at(t);if(t.suspense&&X(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<ft);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===Y)et(t);else if(t.state===lt){const s=P;P=null,nt(()=>at(t,e[0]),!1),P=s}}function nt(t,e){if(P)return t();let n=!1;e||(P=[]),Q?n=!0:Q=[],ft++;try{const s=t();return Ut(n),s}catch(s){n||(Q=null),P=null,Lt(s)}}function Ut(t){if(P&&(Et(P),P=null),t)return;const e=Q;Q=null,e.length&&nt(()=>kt(e),!1)}function Et(t){for(let e=0;e<t.length;e++)ot(t[e])}function jt(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:ot(s)}for(e=0;e<n;e++)ot(t[e])}function at(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===Y?s!==e&&(!s.updatedAt||s.updatedAt<ft)&&ot(s):r===lt&&at(s,e)}}}function It(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=lt,n.pure?P.push(n):Q.push(n),n.observers&&It(n))}}function tt(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)tt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)tt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Vt(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Lt(t,e=C){throw Vt(t)}function gt(t){if(typeof t=="function"&&!t.length)return gt(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=gt(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}const qt=Symbol("fallback");function mt(t){for(let e=0;e<t.length;e++)t[e]()}function Ht(t,e,n={}){let s=[],r=[],i=[],o=0,l=e.length>1?[]:null;return Tt(()=>mt(i)),()=>{let c=t()||[],f=c.length,d,u;return c[Ot],X(()=>{let I,N,F,_,$,x,T,k,m;if(f===0)o!==0&&(mt(i),i=[],s=[],r=[],o=0,l&&(l=[])),n.fallback&&(s=[qt],r[0]=rt(M=>(i[0]=M,n.fallback())),o=1);else if(o===0){for(r=new Array(f),u=0;u<f;u++)s[u]=c[u],r[u]=rt(B);o=f}else{for(F=new Array(f),_=new Array(f),l&&($=new Array(f)),x=0,T=Math.min(o,f);x<T&&s[x]===c[x];x++);for(T=o-1,k=f-1;T>=x&&k>=x&&s[T]===c[k];T--,k--)F[k]=r[T],_[k]=i[T],l&&($[k]=l[T]);for(I=new Map,N=new Array(k+1),u=k;u>=x;u--)m=c[u],d=I.get(m),N[u]=d===void 0?-1:d,I.set(m,u);for(d=x;d<=T;d++)m=s[d],u=I.get(m),u!==void 0&&u!==-1?(F[u]=r[d],_[u]=i[d],l&&($[u]=l[d]),u=N[u],I.set(m,u)):i[d]();for(u=x;u<f;u++)u in F?(r[u]=F[u],i[u]=_[u],l&&(l[u]=$[u],l[u](u))):r[u]=rt(B);r=r.slice(0,o=f),s=c.slice(0)}return r});function B(I){if(i[u]=I,l){const[N,F]=q(u);return l[u]=F,e(c[u],N)}return e(c[u])}}}function w(t,e){return X(()=>t(e||{}))}const Pt=t=>`Stale read from <${t}>.`;function ut(t){const e="fallback"in t&&{fallback:()=>t.fallback};return U(Ht(()=>t.each,t.children,e||void 0))}function O(t){const e=t.keyed,n=U(()=>t.when,void 0,void 0),s=e?n:U(n,void 0,{equals:(r,i)=>!r==!i});return U(()=>{const r=s();if(r){const i=t.children;return typeof i=="function"&&i.length>0?X(()=>i(e?r:()=>{if(!X(s))throw Pt("Show");return n()})):i}return t.fallback},void 0,void 0)}function Wt(t){const e=Gt(()=>t.children),n=U(()=>{const s=e(),r=Array.isArray(s)?s:[s];let i=()=>{};for(let o=0;o<r.length;o++){const l=o,c=r[o],f=i,d=U(()=>f()?void 0:c.when,void 0,void 0),u=c.keyed?d:U(d,void 0,{equals:(B,I)=>!B==!I});i=()=>f()||(u()?[l,d,c]:void 0)}return i});return U(()=>{const s=n()();if(!s)return t.fallback;const[r,i,o]=s,l=o.children;return typeof l=="function"&&l.length>0?X(()=>l(o.keyed?i():()=>{var f;if(((f=X(n)())==null?void 0:f[0])!==r)throw Pt("Match");return i()})):l},void 0,void 0)}function z(t){return t}const Jt=t=>U(()=>t());function Kt(t,e,n){let s=n.length,r=e.length,i=s,o=0,l=0,c=e[r-1].nextSibling,f=null;for(;o<r||l<i;){if(e[o]===n[l]){o++,l++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===o){const d=i<s?l?n[l-1].nextSibling:n[i-l]:c;for(;l<i;)t.insertBefore(n[l++],d)}else if(i===l)for(;o<r;)(!f||!f.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[l]===e[r-1]){const d=e[--r].nextSibling;t.insertBefore(n[l++],e[o++].nextSibling),t.insertBefore(n[--i],d),e[r]=n[i]}else{if(!f){f=new Map;let u=l;for(;u<i;)f.set(n[u],u++)}const d=f.get(e[o]);if(d!=null)if(l<d&&d<i){let u=o,B=1,I;for(;++u<r&&u<i&&!((I=f.get(e[u]))==null||I!==d+B);)B++;if(B>d-l){const N=e[o];for(;l<d;)t.insertBefore(n[l++],N)}else t.replaceChild(n[l++],e[o++])}else o++;else e[o++].remove()}}}const vt="_$DX_DELEGATE";function Qt(t,e,n,s={}){let r;return rt(i=>{r=i,e===document?t():h(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function E(t,e,n,s){let r;const i=()=>{const l=document.createElement("template");return l.innerHTML=t,l.content.firstChild},o=()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function Bt(t,e=window.document){const n=e[vt]||(e[vt]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,Xt))}}function g(t,e){e==null?t.removeAttribute("class"):t.className=e}function yt(t,e,n){n!=null?t.style.setProperty(e,n):t.style.removeProperty(e)}function h(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return ct(t,e,s,n);y(r=>ct(t,e(),r,n),s)}function Xt(t){let e=t.target;const n=`$$${t.type}`,s=t.target,r=t.currentTarget,i=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),o=()=>{const c=e[n];if(c&&!e.disabled){const f=e[`${n}Data`];if(f!==void 0?c.call(e,f,t):c.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},l=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const c=t.composedPath();i(c[0]);for(let f=0;f<c.length-2&&(e=c[f],!!o());f++){if(e._$host){e=e._$host,l();break}if(e.parentNode===r)break}}else l();i(s)}function ct(t,e,n,s,r){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,o=s!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===n))return n;if(o){let l=n[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),n=Z(t,n,s,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean")n=Z(t,n,s);else{if(i==="function")return y(()=>{let l=e();for(;typeof l=="function";)l=l();n=ct(t,l,n,s)}),()=>n;if(Array.isArray(e)){const l=[],c=n&&Array.isArray(n);if(pt(l,e,n,r))return y(()=>n=ct(t,l,n,s,!0)),()=>n;if(l.length===0){if(n=Z(t,n,s),o)return n}else c?n.length===0?$t(t,l,s):Kt(t,n,l):(n&&Z(t),$t(t,l));n=l}else if(e.nodeType){if(Array.isArray(n)){if(o)return n=Z(t,n,s,e);Z(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function pt(t,e,n,s){let r=!1;for(let i=0,o=e.length;i<o;i++){let l=e[i],c=n&&n[t.length],f;if(!(l==null||l===!0||l===!1))if((f=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))r=pt(t,l,c)||r;else if(f==="function")if(s){for(;typeof l=="function";)l=l();r=pt(t,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||r}else t.push(l),r=!0;else{const d=String(l);c&&c.nodeType===3&&c.data===d?t.push(c):t.push(document.createTextNode(d))}}return r}function $t(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function Z(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(r!==l){const c=l.parentNode===t;!i&&!o?c?t.replaceChild(r,l):t.insertBefore(r,n):c&&l.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}class Yt extends Error{constructor(e,n,s){super(n),this.status=e,this.code=n,this.details=s}}async function H(t,e,n){const s={method:t,headers:{"Content-Type":"application/json"}};n!==void 0&&(s.body=JSON.stringify(n));const r=await fetch(e,s);if(!r.ok){const i=await r.json();throw new Yt(r.status,i.error.code,i.details)}return r.json()}function Zt(){return H("GET","/api/v1/repos")}function zt(){return H("GET","/api/v1/tasks")}function te(t){return H("POST","/api/v1/tasks",t)}function ee(t){return new EventSource(`/api/v1/tasks/${t}/events`)}function ne(t,e){return H("POST",`/api/v1/tasks/${t}/input`,e)}function se(t){return H("POST",`/api/v1/tasks/${t}/finish`)}function re(t){return H("POST",`/api/v1/tasks/${t}/end`)}function ie(t){return H("POST",`/api/v1/tasks/${t}/pull`)}function le(t){return H("POST",`/api/v1/tasks/${t}/push`)}function oe(t){return H("POST",`/api/v1/tasks/${t}/reconnect`)}function ae(t){return H("POST",`/api/v1/tasks/${t}/takeover`)}const ue="_container_p7pf0_3",ce="_header_p7pf0_9",fe="_closeBtn_p7pf0_20",de="_messageArea_p7pf0_24",he="_placeholder_p7pf0_35",ge="_inputForm_p7pf0_39",pe="_textInput_p7pf0_45",_e="_btn_p7pf0_50",be="_btnGray_p7pf0_58",me="_btnGreen_p7pf0_62",ve="_btnRed_p7pf0_66",ye="_systemInit_p7pf0_70",$e="_systemMsg_p7pf0_76",we="_assistantMsg_p7pf0_82",ke="_textBlock_p7pf0_86",Se="_result_p7pf0_91",xe="_resultSuccess_p7pf0_98",Te="_resultError_p7pf0_102",Ae="_resultMeta_p7pf0_106",Ce="_resultText_p7pf0_112",Ee="_toolResult_p7pf0_117",Ie="_toolBlock_p7pf0_127",Le="_toolBlockPre_p7pf0_139",v={container:ue,header:ce,closeBtn:fe,messageArea:de,placeholder:he,inputForm:ge,textInput:pe,btn:_e,btnGray:be,btnGreen:me,btnRed:ve,systemInit:ye,systemMsg:$e,assistantMsg:we,textBlock:ke,result:Se,resultSuccess:xe,resultError:Te,resultMeta:Ae,resultText:Ce,toolResult:Ee,toolBlock:Ie,toolBlockPre:Le};var Pe=E("<p>Waiting for agent output..."),Be=E("<button type=button>Finish"),Ne=E("<button type=button>Reconnect"),Me=E("<button type=button>Takeover"),Oe=E('<form><input type=text placeholder="Send message to agent..."><button type=submit>Send</button><button type=button>Pull</button><button type=button>Push</button><button type=button>End'),Fe=E("<div><div><h3>Task #</h3><button>Close</button></div><div>"),Re=E("<div>Session started &middot; <!> &middot; "),Ge=E("<div>[<!>]"),ht=E("<div>"),De=E("<div>$<!> &middot; <!>s &middot; <!> turns"),Ue=E("<div><strong>"),je=E("<details><summary>tool result"),Ve=E("<details><summary></summary><pre>");function qe(t){const[e,n]=q([]),[s,r]=q(""),[i,o]=q(!1);xt(()=>{const _=t.taskId;n([]);const $=ee(_);$.addEventListener("message",x=>{try{const T=JSON.parse(x.data);n(k=>[...k,T])}catch{}}),Tt(()=>$.close())});async function l(){const _=s().trim();if(_){o(!0);try{await ne(t.taskId,{prompt:_}),r("")}finally{o(!1)}}}const c=()=>{const _=t.taskState;return _==="running"||_==="starting"||_==="waiting"},f=()=>t.taskState==="waiting";async function d(){await se(t.taskId)}async function u(){await ie(t.taskId)}async function B(){await le(t.taskId)}async function I(){await re(t.taskId)}async function N(){await oe(t.taskId)}async function F(){await ae(t.taskId)}return(()=>{var _=Fe(),$=_.firstChild,x=$.firstChild;x.firstChild;var T=x.nextSibling,k=$.nextSibling;return h(x,()=>t.taskId,null),T.$$click=()=>t.onClose(),h(k,w(ut,{get each(){return e()},children:m=>w(He,{msg:m})}),null),h(k,w(O,{get when(){return e().length===0},get children(){var m=Pe();return y(()=>g(m,v.placeholder)),m}}),null),h(_,w(O,{get when(){return c()},get children(){var m=Oe(),M=m.firstChild,W=M.nextSibling,R=W.nextSibling,a=R.nextSibling,S=a.nextSibling;return m.addEventListener("submit",p=>{p.preventDefault(),l()}),M.$$input=p=>r(p.currentTarget.value),R.$$click=()=>u(),a.$$click=()=>B(),h(m,w(O,{get when(){return f()},get children(){return[(()=>{var p=Be();return p.$$click=()=>d(),y(()=>g(p,`${v.btn} ${v.btnGreen}`)),p})(),(()=>{var p=Ne();return p.$$click=()=>N(),y(()=>g(p,`${v.btn} ${v.btnGray}`)),p})(),(()=>{var p=Me();return p.$$click=()=>F(),y(()=>g(p,`${v.btn} ${v.btnGray}`)),p})()]}}),S),S.$$click=()=>I(),y(p=>{var J=v.inputForm,K=i(),b=v.textInput,j=i()||!s().trim(),G=`${v.btn} ${v.btnGray}`,V=`${v.btn} ${v.btnGray}`,D=`${v.btn} ${v.btnRed}`;return J!==p.e&&g(m,p.e=J),K!==p.t&&(M.disabled=p.t=K),b!==p.a&&g(M,p.a=b),j!==p.o&&(W.disabled=p.o=j),G!==p.i&&g(R,p.i=G),V!==p.n&&g(a,p.n=V),D!==p.s&&g(S,p.s=D),p},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),y(()=>M.value=s()),m}}),null),y(m=>{var M=v.container,W=v.header,R=v.closeBtn,a=v.messageArea;return M!==m.e&&g(_,m.e=M),W!==m.t&&g($,m.t=W),R!==m.a&&g(T,m.a=R),a!==m.o&&g(k,m.o=a),m},{e:void 0,t:void 0,a:void 0,o:void 0}),_})()}function He(t){return w(Wt,{get children(){return[w(z,{get when(){return Jt(()=>t.msg.type==="system")()&&t.msg.subtype==="init"},get children(){var e=Re(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,h(e,()=>t.msg.model,s),h(e,()=>t.msg.claude_code_version,null),y(()=>g(e,v.systemInit)),e}}),w(z,{get when(){return t.msg.type==="system"},get children(){var e=Ge(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,h(e,()=>t.msg.subtype,s),y(()=>g(e,v.systemMsg)),e}}),w(z,{get when(){return t.msg.type==="assistant"},get children(){var e=ht();return h(e,w(ut,{get each(){var n;return((n=t.msg.message)==null?void 0:n.content)??[]},children:n=>w(O,{get when(){return n.type==="text"},get fallback(){return w(We,{get name(){return n.name??"tool"},get input(){return n.input}})},get children(){var s=ht();return h(s,()=>n.text),y(()=>g(s,v.textBlock)),s}})})),y(()=>g(e,v.assistantMsg)),e}}),w(z,{get when(){return t.msg.type==="result"},get children(){var e=Ue(),n=e.firstChild;return h(n,()=>t.msg.is_error?"Error":"Done"),h(e,w(O,{get when(){return t.msg.result},get children(){var s=ht();return h(s,()=>t.msg.result),y(()=>g(s,v.resultText)),s}}),null),h(e,w(O,{get when(){return t.msg.total_cost_usd},get children(){var s=De(),r=s.firstChild,i=r.nextSibling,o=i.nextSibling,l=o.nextSibling,c=l.nextSibling,f=c.nextSibling;return f.nextSibling,h(s,()=>{var d;return(d=t.msg.total_cost_usd)==null?void 0:d.toFixed(4)},i),h(s,()=>((t.msg.duration_ms??0)/1e3).toFixed(1),l),h(s,()=>t.msg.num_turns,f),y(()=>g(s,v.resultMeta)),s}}),null),y(()=>g(e,`${v.result} ${t.msg.is_error?v.resultError:v.resultSuccess}`)),e}}),w(z,{get when(){return t.msg.type==="user"},get children(){var e=je();return y(()=>g(e,v.toolResult)),e}})]}})}function We(t){return(()=>{var e=Ve(),n=e.firstChild,s=n.nextSibling;return h(n,()=>t.name),h(s,()=>JSON.stringify(t.input,null,2)),y(r=>{var i=v.toolBlock,o=v.toolBlockPre;return i!==r.e&&g(e,r.e=i),o!==r.t&&g(s,r.t=o),r},{e:void 0,t:void 0}),e})()}Bt(["click","input"]);function Je(){"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()}function Ke(){return"Notification"in window&&Notification.permission==="granted"}function Qe(t,e){if(!Ke()||document.visibilityState==="visible")return;const n=new Notification("Agent waiting for input",{body:`Task #${t}: ${e}`,tag:`wmao-waiting-${t}`});n.onclick=()=>{window.focus(),n.close()}}const Xe="_app_otn3a_3",Ye="_submitForm_otn3a_10",Ze="_repoSelect_otn3a_17",ze="_promptInput_otn3a_21",tn="_layout_otn3a_26",en="_placeholder_otn3a_31",nn="_taskCard_otn3a_35",sn="_taskCardSelected_otn3a_43",rn="_taskHeader_otn3a_47",ln="_taskTitle_otn3a_52",on="_stateBadge_otn3a_56",an="_repoLabel_otn3a_62",un="_branchLabel_otn3a_67",cn="_costLabel_otn3a_72",fn="_errorLabel_otn3a_77",dn="_detailPane_otn3a_82",L={app:Xe,submitForm:Ye,repoSelect:Ze,promptInput:ze,layout:tn,placeholder:en,taskCard:nn,taskCardSelected:sn,taskHeader:rn,taskTitle:ln,stateBadge:on,repoLabel:an,branchLabel:un,costLabel:cn,errorLabel:fn,detailPane:dn};var hn=E("<p>No tasks yet."),st=E("<div>"),gn=E('<div><h1>wmao</h1><p>Work my ass off. Manage coding agents.</p><form><select></select><input type=text placeholder="Describe a task..."><button type=submit></button></form><div><div><h2>Tasks'),pn=E("<option>"),_n=E("<span>$<!> &middot; <!>s"),bn=E("<div><div><strong></strong><span>");function mn(){const[t,e]=q(""),[n,s]=q([]),[r,i]=q(!1),[o,l]=q(null),[c,f]=q([]),[d,u]=q("");let B=new Map;Rt(async()=>{Je();const _=await Zt();f(_),_.length>0&&u(_[0].path)});async function I(){const _=t().trim(),$=d();if(!(!_||!$)){i(!0);try{const x=await te({prompt:_,repo:$});e(""),await N(),l(x.id)}finally{i(!1)}}}async function N(){const _=await zt();for(const $ of _)$.state==="waiting"&&B.get($.id)!=="waiting"&&Qe($.id,$.task);B=new Map(_.map($=>[$.id,$.state])),s(_)}setInterval(N,5e3),N();const F=()=>{const _=o();return _===null?null:n().find($=>$.id===_)??null};return(()=>{var _=gn(),$=_.firstChild,x=$.nextSibling,T=x.nextSibling,k=T.firstChild,m=k.nextSibling,M=m.nextSibling,W=T.nextSibling,R=W.firstChild;return R.firstChild,T.addEventListener("submit",a=>{a.preventDefault(),I()}),k.addEventListener("change",a=>u(a.currentTarget.value)),h(k,w(ut,{get each(){return c()},children:a=>(()=>{var S=pn();return h(S,()=>a.path),y(()=>S.value=a.path),S})()})),m.$$input=a=>e(a.currentTarget.value),h(M,()=>r()?"Submitting...":"Run"),h(R,w(O,{get when(){return n().length===0},get children(){var a=hn();return y(()=>g(a,L.placeholder)),a}}),null),h(R,w(ut,{get each(){return n()},children:a=>(()=>{var S=bn(),p=S.firstChild,J=p.firstChild,K=J.nextSibling;return S.$$click=()=>l(a.id),h(J,()=>a.task),h(K,()=>a.state),h(S,w(O,{get when(){return a.repo},get children(){var b=st();return h(b,()=>a.repo),y(()=>g(b,L.repoLabel)),b}}),null),h(S,w(O,{get when(){return a.branch},get children(){var b=st();return h(b,()=>a.branch),y(()=>g(b,L.branchLabel)),b}}),null),h(S,w(O,{get when(){return a.costUSD>0},get children(){var b=_n(),j=b.firstChild,G=j.nextSibling,V=G.nextSibling,D=V.nextSibling;return D.nextSibling,h(b,()=>a.costUSD.toFixed(4),G),h(b,()=>(a.durationMs/1e3).toFixed(1),D),y(()=>g(b,L.costLabel)),b}}),null),h(S,w(O,{get when(){return a.error},get children(){var b=st();return h(b,()=>a.error),y(()=>g(b,L.errorLabel)),b}}),null),y(b=>{var j=`${L.taskCard} ${o()===a.id?L.taskCardSelected:""}`,G=L.taskHeader,V=L.taskTitle,D=L.stateBadge,bt=vn(a.state);return j!==b.e&&g(S,b.e=j),G!==b.t&&g(p,b.t=G),V!==b.a&&g(J,b.a=V),D!==b.o&&g(K,b.o=D),bt!==b.i&&yt(K,"background",b.i=bt),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),S})()}),null),h(W,w(O,{get when(){return o()!==null},get children(){var a=st();return h(a,w(qe,{get taskId(){return o()??0},get taskState(){var S;return((S=F())==null?void 0:S.state)??"pending"},onClose:()=>l(null)})),y(()=>g(a,L.detailPane)),a}}),null),y(a=>{var S=L.app,p=L.submitForm,J=r(),K=L.repoSelect,b=r(),j=L.promptInput,G=r()||!t().trim()||!d(),V=L.layout,D=o()!==null?"0 0 340px":"1";return S!==a.e&&g(_,a.e=S),p!==a.t&&g(T,a.t=p),J!==a.a&&(k.disabled=a.a=J),K!==a.o&&g(k,a.o=K),b!==a.i&&(m.disabled=a.i=b),j!==a.n&&g(m,a.n=j),G!==a.s&&(M.disabled=a.s=G),V!==a.h&&g(W,a.h=V),D!==a.r&&yt(R,"flex",a.r=D),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),y(()=>k.value=d()),y(()=>m.value=t()),_})()}function vn(t){switch(t){case"done":return"#d4edda";case"failed":return"#f8d7da";case"ended":return"#e2e3e5";default:return"#fff3cd"}}Bt(["input","click"]);const wt=document.getElementById("app");wt&&Qt(()=>w(mn,{}),wt);
